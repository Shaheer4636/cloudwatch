# Region must be us-east-1
export AWS_REGION=us-east-1
export AWS_DEFAULT_REGION=us-east-1

# Do ANY ContainerInsights metrics exist?
aws cloudwatch list-metrics \
  --namespace AWS/ContainerInsights \
  --max-items 5

# What ClusterName values are present for a core metric?
aws cloudwatch list-metrics \
  --namespace AWS/ContainerInsights \
  --metric-name node_cpu_utilization \
  --query "unique([].Dimensions[?Name=='ClusterName'].Value[])"

# List the Container Insights log groups (these reveal the actual cluster name used)
aws logs describe-log-groups \
  --log-group-name-prefix /aws/containerinsights/ \
  --query "logGroups[].logGroupName"
